<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Samba531 Data</title>
<style>
body{margin:0;font-family:Arial;background:#0b5ed7;color:#fff}
header{padding:15px;text-align:center;background:#084298}
.card{background:#0d6efd;margin:10px;padding:15px;border-radius:8px}
button{width:100%;padding:12px;border:none;border-radius:6px;font-size:16px}
.mtn{background:#ffc107;color:#000}
.at{background:#0dcaf0}
.telecel{background:#dc3545}
.wallet{background:#198754;margin-bottom:10px}
</style>
</head>

<body>

<header>
<h2>Samba531 Data</h2>
<p>Instant Data Delivery</p>
</header>

<div class="card">
<h3>Wallet Balance</h3>
<h2 id="balance">GHS 0</h2>
<input id="amount" placeholder="Enter amount" type="number">
<button class="wallet" onclick="topUp()">Top Up Wallet</button>
</div>

<div class="card">
<h3>2GB â€“ GHS 12</h3>
<button class="mtn" onclick="buy('MTN','2GB',12)">Buy MTN</button>
<button class="at" onclick="buy('AirtelTigo','2GB',12)">Buy AirtelTigo</button>
<button class="telecel" onclick="buy('Telecel','2GB',12)">Buy Telecel</button>
</div>

<script src="https://js.paystack.co/v1/inline.js"></script>
<script>
let balance = 0;

function updateBalance(){
 document.getElementById("balance").innerText = "GHS " + balance;
}

function topUp(){
 let amt = Number(document.getElementById("amount").value);
 if(!amt) return alert("Enter amount");

 PaystackPop.setup({
   key: "pk_test_36e29f5351329fb6632114ba263089ecb14608f0",
   email: "customer@samba531.com",
   amount: amt * 100,
   currency: "GHS",
   callback: function(res){
     fetch("https://YOUR_BACKEND_URL/verify",{
       method:"POST",
       headers:{"Content-Type":"application/json"},
       body:JSON.stringify({reference:res.reference})
     })
     .then(r=>r.json())
     .then(d=>{
       if(d.success){
         balance += amt;
         updateBalance();
         alert("Wallet funded");
       }
     });
   }
 }).openIframe();
}

function buy(network,bundle,price){
 if(balance < price) return alert("Insufficient balance");

 fetch("https://YOUR_BACKEND_URL/order",{
   method:"POST",
   headers:{"Content-Type":"application/json"},
   body:JSON.stringify({
     network,bundle,price,phone:"233531766320"
   })
 })
 .then(r=>r.json())
 .then(d=>{
   if(d.success){
     balance -= price;
     updateBalance();
     alert("Order successful");
   } else alert("Failed");
 });
}
</script>

</body>
</html>
