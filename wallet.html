<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Samba531 Data - Wallet</title>
<style>
*{ box-sizing:border-box; font-family: 'Poppins', Arial, sans-serif; margin:0; padding:0;}
body{ background: linear-gradient(135deg,#e6f7ff,#ffffff); color:#003366; text-align:center; padding:20px;}
h1,h2{ margin-bottom:15px; }
.btn{ padding:15px 25px; margin:10px; border:none; border-radius:16px; font-size:16px; font-weight:bold; cursor:pointer; background:#005eff; color:white; box-shadow:0 4px 12px rgba(0,0,0,0.2); transition:0.3s;}
.btn:hover{ transform:scale(1.05); }
input{ padding:12px; width:80%; max-width:250px; border-radius:12px; border:2px solid #005eff; font-size:16px; margin-bottom:15px;}
#balance{ font-size:24px; font-weight:bold; margin:20px 0; color:#ff6600;}
</style>
</head>
<body>

<h1>Wallet ðŸ’°</h1>
<p>Check your balance or top up your wallet here.</p>

<h2>Current Balance:</h2>
<div id="balance">GHS 0.00</div>

<h2>Top Up Wallet</h2>
<input type="number" id="topupAmount" placeholder="Enter amount in Cedis">
<br>
<button class="btn" onclick="payWithPaystack()">Top Up</button>

<br><br>
<a href="index.html" class="btn">Back to Home</a>

<script src="https://js.paystack.co/v1/inline.js"></script>
<script>
let balance = 0;

function updateBalance(){
  document.getElementById("balance").innerText = "GHS " + balance.toFixed(2);
}

// === PAYSTACK WALLET TOP-UP ===
function payWithPaystack(){
  let amount = parseFloat(document.getElementById("topupAmount").value);
  if(isNaN(amount) || amount <= 0){
    alert("Please enter a valid amount.");
    return;
  }

  let amountKobo = amount * 100; // Convert Cedis to kobo
  var handler = PaystackPop.setup({
    key: 'pk_test_36e29f5351329fb6632114ba263089ecb14608f0', // your Paystack public key
    email: 'customer@example.com', // optional, can be dynamic
    amount: amountKobo,
    currency: 'GHS',
    ref: ''+Math.floor((Math.random() * 1000000000) + 1),
    callback: function(response){
      console.log('Payment successful. Reference:', response.reference);
      // Increase wallet balance after successful payment
      balance += amount;
      updateBalance();
      alert("ðŸŽ‰ Wallet topped up successfully! Current Balance: GHS " + balance.toFixed(2));
      document.getElementById("topupAmount").value = "";
    },
    onClose: function(){
      alert('Transaction was not completed, window closed.');
    }
  });
  handler.openIframe();
}

// Initialize
updateBalance();
</script>

</body>
</html>
